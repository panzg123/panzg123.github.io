---
layout: post
title: 大型网站技术架构
categories: 网络编程
---
**读书笔记，摘自《大型网站技术架构》一书**

# **1.大型网站软件系统的特点**

与传统企业应用系统相比，大型互联网应用系统有以下特点。

1.  **高并发，大流量**：比如QQ,Google,Taobao
2.  **高可用:**系统要提供7X24小时不间断服务，不能宕机。
3.  **海量数据**：存储管理海量数据。
4.  **用户分布广泛，网络情况复杂**：服务全球，用户分不广。
5.  **安全环境恶劣**：很容易受到攻击
6.  **需求快速变更，发布频繁**：快速适应市场，满足用户需求
7.  **渐进式发展**：从小做起，渐进发展

# **2.大型网站架构演化发展历程**

大型网站的技术挑战主要来自于庞大的用户，高并发的访问和海量的数据，任何简单的业务一旦需要处理数以P计的数据和面对数以亿计的用户，问题就会变得很棘手。大型网站架构主要就是解决这类问题。

## 2.1初始阶段的网站架构

应用程序、数据库、文件等所有的资源都在一台服务器上。常用LAMP架构。

![](http://7xsvsk.com2.z0.glb.clouddn.com/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%841.png)

## 2.2应用服务和数据服务分离

随着业务发展，一台服务器不能满足要求；应用服务器需要处理大量的业务逻辑，需要更快的CPU；数据库服务器需要快速磁盘检索和数据缓存，因此需要更快的硬盘和更大的内存；文件服务器需要存储大量的用户上传的文件，因此需要更大的硬盘。
![](http://7xsvsk.com2.z0.glb.clouddn.com/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%842.png)

## 2.3使用缓存改善网站性能

网站的二八定律：80%的业务访问集中在20%的数据上，比如淘宝的商品浏览、百度搜索的关键词、热门微博。

**本地缓存+远程缓存。**

本地缓存：更快一些，但是缓存数据量有限制。

远程缓存：远程分布式缓存使用集群方式，部署大内存的服务器作为专门的缓存服务器。

![](http://7xsvsk.com2.z0.glb.clouddn.com/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%843.png)

## 2.4使用应用服务器集群改善网站的并发处理能力

增加服务器不断改善系统性能，从而实现系统的可伸缩性，通过负载均衡调度服务器，将来自用户的请求分发到服务器集群上。

![](http://7xsvsk.com2.z0.glb.clouddn.com/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%844.png)

## 2.5数据库读写分离

目前大多数主流数据库都提供主从热备功能，通过配置两台数据库的主从关系，可以一台数据库服务器上的数据更新同步到另一台服务器上，从而实现读写分离，改善系统数据库的负载压力。

![](http://7xsvsk.com2.z0.glb.clouddn.com/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%845.png)

## 2.6使用反向代理和CDN加速网站响应

CDN和反向代理的基本原理都是缓存，区别在于CDN部署在网络提供商的机房，使用户在请求网站服务时可以从距离自己最近的网络服务商处获取数据；反向代理则部署在中心机房。

![](http://7xsvsk.com2.z0.glb.clouddn.com/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%846.png)

## 2.7使用分布式文件系统和分布式数据库系统

分布式数据库是网站数据库拆分的最后手段，只有在单表数据规模非常庞大的时候才使用，网站更常用的数据库拆分手段是业务分库，将不同业务的数据库部署到不同的物理服务器上。

![](http://7xsvsk.com2.z0.glb.clouddn.com/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%847.png)

## 2.8使用NoSQL和搜索引擎

随着业务越来越复杂，对数据存储和检索的需求也越来越复杂，网站需要采用一些非关系数据库技术和搜索技术。

![](http://7xsvsk.com2.z0.glb.clouddn.com/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%848.png)

## 2.9业务拆分

采用分而治之的手段，将整个网站的业务分成不同的产品线，比如大型购物交易型就会将首页、商铺、买家、卖家等拆分成不同的产品线，分归不同的业务团队负责，不同的应用独立部署维护。

![](http://7xsvsk.com2.z0.glb.clouddn.com/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%849.png)

## 2.10分布式服务

![](http://7xsvsk.com2.z0.glb.clouddn.com/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%8410.png)

## 3.参考：

《大型网站技术架构---核心原理与案例分析》

博客：[http://zhanjia.iteye.com/blog/2038540](http://zhanjia.iteye.com/blog/2038540 "http://zhanjia.iteye.com/blog/2038540")

**作者**：[西芒xiaoP](http://www.cnblogs.com/panweishadow/)

**出处**：[http://www.cnblogs.com/panweishadow/](http://www.cnblogs.com/panweishadow/)

若用于非商业目的，您可以自由转载，但请保留原作者信息和文章链接URL。
